*** Settings ***
Library         SeleniumLibrary
Library         XML
Resource        ../../../Locator/LoginLocator.robot
Resource        ../../../Utils/Common.robot
Variables       ../../../data/Env.py

*** Variables ***
${text_Button_Sign_In}          //input[@type='submit']//following-sibling::div
${button_Sign_In}               //*[@type="submit"]//following-sibling::div
${textbox_Email}                //*[@name="username"]
${textbox_Pass}                 //*[@name="password"]
${popup_Enter_Pin}              //*[@class="pinFormRoot fadeInAnimation qe-firstPinForm"]
${error_Mess}                   //*[@class="YSmcKdXxo1fW5mpImVib gccsdOUhK7jy1_YdDA5k"]
${close_Popup}                  (//*[@class="CCmqaL2h1kwLflrsh6zo xfa0_FhmxUzwKzhL_6Wo"]//*[@class="svgIcon undefined"])[1]
${icon_Loading}                 //img[@src="common/Spinner-white.svg"]

*** Keywords ***
Verify text placeholder of textbox Email
    Verify text placeholder     ${textbox_Email}     Email

Verify text placeholder of textbox Password
    Verify text placeholder     ${textbox_Pass}     Password

Verify button [Sign In] disable
    Wait Until Element Is Not Visible        ${icon_Loading}
    Wait Until Element Is Visible        ${button_Sign_In}
    Capture Page Screenshot
    ${value}=   Execute Javascript     return window.getComputedStyle(document.evaluate(`${button_Sign_In}`, document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue,null).getPropertyValue("cursor");
    Should Be Equal    ${value}    not-allowed

Input textbox Email in Trading
    [Arguments]     ${text}
    Input Text To Element    ${textbox_Email}    ${text}

Input textbox Password in Trading
    [Arguments]     ${text}
    Input Text To Element    ${textbox_Pass}    ${text}

Clear text into textbox
    [Arguments]     ${locator}
    Wait Until Element Is Visible    ${locator}
    Press Keys      ${locator}      CTRL+A+BACKSPACE

Clear text into textbox Email
    Clear text into textbox     ${textbox_Email}

Clear text into textbox Password
    Clear text into textbox     ${textbox_Pass}
    
Click button [Sign In]
    Click To Element    ${button_Sign_In}
    
Verify login successfully
    Wait Until Element Is Visible    ${popup_Enter_Pin}     timeout=30s
    Element Should Be Visible    ${popup_Enter_Pin}

Verify error message
    [Arguments]           ${textExpected}
    Verify message      ${error_Mess}      ${text_Expected}
    
Close popup Sign In
    Click To Element    ${close_Popup}

Verify button disable in time
    [Arguments]     ${expectedTime}
    Wait Until Element Is Not Visible        ${icon_Loading}
    ${text}=        Get Text    ${button_Sign_In}
    Should Be Equal    ${expectedTime}s    ${text}
    Verify button [Sign In] disable

Wait button [Sign In] enable
    wait button enable by JS        ${button_Sign_In}