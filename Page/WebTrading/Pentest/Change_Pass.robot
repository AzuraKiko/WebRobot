*** Settings ***
Resource    ../../../Page/WebTrading/Pentest/LoginPage.robot


*** Variables ***
${icon_Setting}                         //*[@class="headerRight"]//div[text()='settings']
${option_Security}                      //div[contains(@class, 'security security')]

${option_change_password}               //*[text()='change password']
${header_change_password}               //*[text()="change your password"]
${textbox_current_password}             //*[text()='current password']
${textbox_current_password_input}       //*[text()='current password']//preceding-sibling::input
${textbox_new_password}                 //*[text()='new password']
${textbox_new_password_input}           //*[text()='new password']//preceding-sibling::input
${textbox_confirm_password}             //*[text()='confirm new password']
${textbox_confirm_password_input}       //*[text()='confirm new password']//preceding-sibling::input

${button_OK}                            (//*[text()='cancel']//parent::div//following-sibling::div)[2]
${button_cancel}                        //*[text()='cancel'][@class="changepasswordText size--4 text-uppercase"]

${error_Mess_Change_Pass}               //*[@class="changepasswordError size--3"]
${icon_Loading_Change_Pass}             //*[@src="common/Spinner-white.svg"]


*** Keywords ***
# Navigation Keywords
Click icon Setting
    Click To Element    ${icon_Setting}

Hover To Security
    Hover To Element    ${option_Security}

Click Change Password Option
    Click To Element    ${option_change_password}

Open Change Password Popup
    Login And Input Pin    ${username}    ${password}
    Click icon Setting
    Hover To Security
    Click Change Password Option

# Verification Keywords

Verify Change Password Popup Displayed
    Verify element display    ${header_change_password}

Verify OK Button Disabled
    Verify button disable/enable by JS    ${button_OK}    not-allowed

Verify OK Button Enabled
    Verify button disable/enable by JS    ${button_OK}    pointer

Verify Cancel Button Enabled
    Verify button disable/enable by JS    ${button_cancel}    pointer

# Input Keywords

Input Current Password
    [Arguments]    ${text}
    Clear And Input Text To Element    ${textbox_current_password_input}    ${text}

Input New Password
    [Arguments]    ${text}
    Clear And Input Text To Element    ${textbox_new_password_input}    ${text}

Input Confirm Password
    [Arguments]    ${text}
    Clear And Input Text To Element    ${textbox_confirm_password_input}    ${text}

# Action Keywords

Wait OK Button Enabled
    Wait Button Enable By Text    ${button_OK}    OK

Click OK Button
    Click To Element    ${button_OK}

Verify Error Message
    [Arguments]    ${expected_text}
    Verify message    ${error_Mess_Change_Pass}    ${expected_text}

Verify OK Button Disabled With Timeout
    [Documentation]    Verifies OK button is disabled with a specific timeout
    [Arguments]    ${time_block}
    Wait Until Element Is Not Visible    ${icon_Loading_Change_Pass}    ${time}
    Verify button disable in time    ${button_OK}    ${time_block}

Click OK Popup Confirm
    Click To Element    ${popup_Confirm_Bound_OK}
