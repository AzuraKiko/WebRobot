*** Settings ***
Resource        ../../../Locator/LoginLocator.robot
Resource        ../../../Utils/Common.robot
#Resource        ../../WebAdmin/Pentest/Change_PIN.robot

*** Variables ***
${option_Change_Pass}                           //*[text()='change password']
${header_Popup_Change_Pass}                     //*[text()="change your password"]
${textbox_Current_Pass}                         //*[text()='current password']
${textbox_Current_Pass1}                         //*[text()='current password']//preceding-sibling::input
${textbox_New_Password}                         //*[text()='new password']
${textbox_New_Password1}                         //*[text()='new password']//preceding-sibling::input
${textbox_Confirm_New_Password}                 //*[text()='confirm new password']
${textbox_Confirm_New_Password1}                 //*[text()='confirm new password']//preceding-sibling::input
${button_OK_Change_Pass}                        (//*[text()='cancel']//parent::div//following-sibling::div)[2]
${button_Cancel_Change_Pass}                    //*[text()='cancel'][@class="changepasswordText size--4 text-uppercase"]
${error_Mess_Change_Pass}                       //*[@class="changepasswordError size--3"]
${icon_Loading_Change_Pass}                     //*[@src="common/Spinner-white.svg"]

*** Keywords ***
Click option Change Pass
    Click To Element    ${option_Change_Pass}

Verify popup Change Pass display
    Verify element display    ${header_Popup_Change_Pass}

Verify text placeholder of textbox Current Password
    [Arguments]         ${text_Expected}
    Wait Until Element Is Visible    ${textbox_Current_Pass}
    ${text_Actual}=          Get Text    ${textbox_Current_Pass}
    Should Be Equal    ${text_Expected}   ${text_Actual}

Verify text placeholder of textbox New Password
    [Arguments]         ${text_Expected}
    Wait Until Element Is Visible    ${textbox_New_Password}
    ${text_Actual}=          Get Text    ${textbox_New_Password}
    Should Be Equal    ${text_Expected}   ${text_Actual}

Verify text placeholder of textbox Confirm New Password
    [Arguments]         ${text_Expected}
    Wait Until Element Is Visible    ${textbox_Confirm_New_Password}
    ${text_Actual}=          Get Text    ${textbox_Confirm_New_Password}
    Should Be Equal    ${text_Expected}   ${text_Actual}
    
Verify button [OK] in Change Pass screen disable
    Verify button disable/enable by JS    ${button_OK_Change_Pass}    not-allowed

Input textbox Current Password
    [Arguments]     ${text}
    Input Text To Element    ${textbox_Current_Pass1}    ${text}

Input textbox New Password
    [Arguments]     ${text}
    Input Text To Element    ${textbox_New_Password1}    ${text}

Input textbox Confirm New Password
    [Arguments]     ${text}
    Input Text To Element    ${textbox_Confirm_New_Password1}    ${text}

Verify button [Cancel] in Change Pass screen enable
    Verify button disable/enable by JS    ${button_Cancel_Change_Pass}    pointer

Verify button [OK] in Change Pass screen enable
    Verify button disable/enable by JS    ${button_OK_Change_Pass}    pointer
    
Click button [OK]
    Click To Element    ${button_OK_Change_Pass}

Verify error message at Change Pass
    [Arguments]     ${text_Expected}
    Verify message    ${error_Mess_Change_Pass}    ${text_Expected}

Verify button [OK] in Change Pass disable in time
    [Arguments]     ${time}
    Wait Until Element Is Not Visible    ${icon_Loading_Change_Pass}    timeout=30s
    Verify button disable/enable by JS      ${button_OK_Change_Pass}        not-allowed
    ${time_Actual}=     Get Text    ${button_OK_Change_Pass}
    Should Be Equal    ${time}S    ${time_Actual}
    Wait button enable by JS    ${button_OK_Change_Pass}