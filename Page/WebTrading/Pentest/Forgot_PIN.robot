*** Settings ***
Resource    ../../../Page/WebTrading/Pentest/Create_PIN.robot


*** Variables ***
${textbox_Confirm_New_Pin}      (//*[@class="pinFormInput"])[3]//*[contains(@class,"symbolPrivatePinCode")]
${mess_Erros_Pass}              //*[@class="incorrectText text-capitalize"]
${error_Setting}                //*[@class="errorSetting error"]
${popup_OTP}                    //*[@class="header size--4"][text()='Confirm OTP']


*** Keywords ***
Open Forgot PIN Popup
    Login    ${username}    ${password}
    Click Forgot PIN

Verify error message Password in Reset PIN screen
    [Arguments]    ${text_Expected}
    Wait Until Element Is Visible    ${mess_Erros_Pass}
    FOR    ${i}    IN RANGE    1000
        ${text_Actual}=    Get Text    ${mess_Erros_Pass}
        ${text_Actual}=    Convert To Lowercase    ${text_Actual}
        ${text_Expected}=    Convert To Lowercase    ${text_Expected}
        IF    '${text_Actual}'=='${text_Expected}'    BREAK
    END
    Should Be Equal    ${text_Actual}    ${text_Expected}

Click button Cancel
    Click To Element    ${button_Cancel}

Verify Error Setting
    [Arguments]    ${text_Expected}
    Verify message    ${error_Setting}    ${text_Expected}

Wait button OK enable
    Wait Button Enable By Text    ${button_OK}    OK

Verify OTP screen display
    Verify element display    ${popup_OTP}

Verify text placeholder textbox input code
    [Arguments]    ${text_Expected}
    Wait Until Element Is Visible    ${textbox_Enter_Code}
    ${text_Actual}=    SeleniumLibrary.Get Element Attribute    ${textbox_Enter_Code}    placeholder
    Should Be Equal    ${text_Expected}    ${text_Actual}

Verify textbox Enter Code receive characters
    [Arguments]    ${text_Expected}
    Wait Until Element Is Visible    ${textbox_Enter_Code}
    ${text_Actual}=    SeleniumLibrary.Get Element Attribute    ${textbox_Enter_Code}    value
    Should Be Equal    ${text_Expected}    ${text_Actual}

Verify button [Send Code] disable
    Wait Until Element Is Visible    ${button_Send_Code}
    Wait Button Disable By JS    ${button_Send_Code}

Wait button [Send Code] enable
    Wait Button Enable By Text    ${button_Send_Code}    Send Code
